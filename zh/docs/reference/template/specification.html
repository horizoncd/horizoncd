<!doctype html>
<html lang="zh" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-reference/template/specification">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">Horizon Template | Horizon</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://horizoncd.github.io/zh/docs/reference/template/specification"><meta data-rh="true" name="docusaurus_locale" content="zh"><meta data-rh="true" name="docsearch:language" content="zh"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Horizon Template | Horizon"><meta data-rh="true" name="description" content="What is Horizon Template"><meta data-rh="true" property="og:description" content="What is Horizon Template"><link data-rh="true" rel="icon" href="/zh/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://horizoncd.github.io/zh/docs/reference/template/specification"><link data-rh="true" rel="alternate" href="https://horizoncd.github.io/docs/reference/template/specification" hreflang="en"><link data-rh="true" rel="alternate" href="https://horizoncd.github.io/zh/docs/reference/template/specification" hreflang="zh"><link data-rh="true" rel="alternate" href="https://horizoncd.github.io/docs/reference/template/specification" hreflang="x-default"><link rel="stylesheet" href="/zh/assets/css/styles.9292283f.css">
<link rel="preload" href="/zh/assets/js/runtime~main.053f97fd.js" as="script">
<link rel="preload" href="/zh/assets/js/main.d3eccb78.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/zh/"><div class="navbar__logo"><img src="/zh/img/horizon.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/zh/img/horizon.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>中文</a><ul class="dropdown__menu"><li><a href="/docs/reference/template/specification" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en">English</a></li><li><a href="/zh/docs/reference/template/specification" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="zh">中文</a></li></ul></div><a href="https://github.com/horizoncd/horizon" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Github<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/zh/docs">Home</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" href="/zh/docs/tutorials/how-to-install/local-installation">Tutorials</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" tabindex="0" href="/zh/docs/tutorials/how-to-install/local-installation">How to Install</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/tutorials/how-to-install/local-installation">Local Installation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/tutorials/how-to-install/cloud-provider-installation">Cloud Provider Installation</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/tutorials/how-to-deploy-your-first-workload">How to Deploy Your First Workload</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/tutorials/custom-ci">Custom CI</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" href="/zh/docs/user-guide/administrator/idp">User Guide</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" tabindex="0" href="/zh/docs/user-guide/administrator/idp">Administrator</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/user-guide/administrator/idp">Identity Providor</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/user-guide/administrator/environment">Environments</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/user-guide/administrator/registry">Registries</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/user-guide/administrator/kubernetes">Kubernetes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/user-guide/administrator/user-management">User Management</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" tabindex="0" href="/zh/docs/user-guide/common-user/group">Common User</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/user-guide/common-user/group">Group</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/user-guide/common-user/application">Application</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/user-guide/common-user/cluster">Cluster</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/user-guide/common-user/deploy-and-pod-management">Deploy and Manage Pods</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/user-guide/common-user/trigger">Trigger</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/user-guide/common-user/monitor">Monitor</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/user-guide/common-user/member">Member</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/user-guide/common-user/access-token">Access Token</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/user-guide/common-user/template">Template</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/user-guide/common-user/oauth-app">Oauth App</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/user-guide/common-user/webhook">Webhook</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/user-guide/common-user/user-space">User Space</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/zh/docs/reference/api/use-the-apis">Reference</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" tabindex="0" href="/zh/docs/reference/api/use-the-apis">API</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/reference/api/use-the-apis">Use APIs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/reference/api/apis">Horizon APIs</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/zh/docs/reference/template/specification">Template</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/zh/docs/reference/template/specification">Specification</a></li></ul></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/zh/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Reference</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Template</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Specification</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>Horizon Template</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-horizon-template">What is Horizon Template<a href="#what-is-horizon-template" class="hash-link" aria-label="What is Horizon Template的直接链接" title="What is Horizon Template的直接链接">​</a></h2><p>Horizon uses a packaging format called <code>Horizon Template</code>. You can use the Horizon template to deploy various workloads and achieve best practices through a user-friendly form. This document explains the template format and provides basic guidance for building Horizon templates.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="prepare">Prepare<a href="#prepare" class="hash-link" aria-label="Prepare的直接链接" title="Prepare的直接链接">​</a></h2><p>Horizon Templates are based on Helm Charts, Json Schema and React JsonSchema Form, so it is important to have a basic understanding of the following knowledge before proceeding:</p><ul><li><strong><a href="https://helm.sh/docs/topics/charts/" target="_blank" rel="noopener noreferrer">Helm Charts</a></strong><br>Helm charts contain a series of Kubernetes resources that can be used to deploy various simple or complex applications to a Kubernetes cluster.</li><li><strong><a href="https://json-schema.org/" target="_blank" rel="noopener noreferrer">Json Schema</a></strong><br>Json Schema is a declarative language that allows you to annotate and validate JSON documents.</li><li><strong><a href="https://github.com/rjsf-team/react-jsonschema-formhttps://json-schema.org/" target="_blank" rel="noopener noreferrer">React JsonSchema Form</a></strong><br>React JsonSchema Form is a library that generates user-friendly HTML forms based on Json Schema. The form collects user input, which is used to render the chart and generate the final manifest file for deployment to Kubernetes.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="why-do-we-choose-react-jsonschema-form">Why do we choose React JsonSchema Form<a href="#why-do-we-choose-react-jsonschema-form" class="hash-link" aria-label="Why do we choose React JsonSchema Form的直接链接" title="Why do we choose React JsonSchema Form的直接链接">​</a></h3><p>The <code>values.json.schema</code> specification provided by Helm Chart is mainly for validation, we choose React Json Schema Form mainly because of its stronger form display capabilities. In addition, we applied go template syntax to the json schema file to enhance its flexibility.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="template-structure">Template Structure<a href="#template-structure" class="hash-link" aria-label="Template Structure的直接链接" title="Template Structure的直接链接">​</a></h2><p>A typical Horizon template is organized as a collection of files that match this:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">├── Chart.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── README.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── templates</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── _helpers.tpl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── resource.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│── values.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── schema</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── application.schema.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── application.ui.schema.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── output</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    └── outputs.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>It mainly consists of the following parts:</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="helm-chart">Helm Chart<a href="#helm-chart" class="hash-link" aria-label="Helm Chart的直接链接" title="Helm Chart的直接链接">​</a></h3><p>Helm chart includes the following files:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">├── Chart.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── README.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── templates</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── _helpers.tpl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── resource.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── values.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><strong>Chart.yaml</strong><br>A standard Helm Chart file that contains meta-information about the chart, such as the chart name, version, and description.</li></ul><p>  For example:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: v2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name: deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">description: A Horizon Template Chart for kubernets</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type: application</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">version: 0.0.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><p><strong>README.md</strong><br>
<!-- -->A markdown file that provides documentation and usage instructions for the chart.</p><p>  For example:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Template name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">template description</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">## Structure</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">structure description</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p><strong>templates</strong><br>
<!-- -->A directory contains Go template files that define the Kubernetes resources that will be deployed when the chart is installed. These templates use the values from the <code>values.yaml</code> file and the user input from the form to render the final Kubernetes manifest files.</p><ul><li><p><strong>resource.yaml</strong><br>
<!-- -->The main resource manifest file to applyed to Kubernetes, we recommend you to use a unique name for the <code>name</code> field, such as <code>{{ .Values.horizon.cluster }}</code>, for more built-in parameters, please refer to <a href="#gitops-repository-structure">GitOps Repository Structure</a>.</p><p>In addition to the built-in parameters, you can also customize the parameters through the json schema. We recommend putting your parameters in <code>.Values.app</code>.</p><p>For example:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: apps/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: {{ .Values.horizon.cluster }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  replicas: {{ .Values.app.spec.replicas }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  selector:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  template:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      labels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      {{- include &quot;podLabels&quot; . | nindent 8 }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      containers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - name: {{ .Values.horizon.cluster }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        image: {{ .Values.image }}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p><strong>_helpers.tpl</strong><br>
<!-- -->An optional file that contains Go template functions that can be reused across different yaml files.</p><p>For example:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{{- define &quot;podLabels&quot; -}}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">horizoncd.github.io/application: {{ .Values.horizon.application }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">horizoncd.github.io/cluster: {{ .Values.horizon.cluster }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">horizoncd.github.io/environment: {{ .Values.env.environment }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{{- end }}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul></li></ul><p>Refer to <a href="https://helm.sh/docs/topics/charts/" target="_blank" rel="noopener noreferrer">Helm Chart documentation</a> for more information</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="json-schema">Json Schema<a href="#json-schema" class="hash-link" aria-label="Json Schema的直接链接" title="Json Schema的直接链接">​</a></h3><p>The json schema directory format is as follows:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">└── schema</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├── application.schema.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    └── application.ui.schema.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><p><strong>application.schema.json</strong><br>
<!-- -->application.schema.json is used to generate a user-friendly form for users to create application or cluster and validate their inputs, it follows the <a href="https://json-schema.org/" target="_blank" rel="noopener noreferrer">JSON Schema specification</a>, you need to write this file based on the Helm Chart&#x27;s values.yaml.
You can also use Go template syntax in the <code>application.schema.json</code> file to quote admin tags to conditionally show some special options.</p><p>  For example, if we set an admin tag <code>maxReplicas=60</code>, the replicas of cluster can exceed the default limit of 30. </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;type&quot;: &quot;object&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;properties&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;app&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;title&quot;: &quot;application&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;type&quot;: &quot;object&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;properties&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;spec&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;type&quot;: &quot;object&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;title&quot;: &quot;spec&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;properties&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;replicas&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &quot;type&quot;: &quot;integer&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &quot;title&quot;: &quot;replicas&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &quot;default&quot;: 1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &quot;minimum&quot;: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &quot;maximum&quot;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              {{- .maxReplicas | default 30 }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p><strong>application.ui.schema.json</strong><br>
<!-- -->The application.ui.schema.json is used to describe the layout and appearance of the form generated by React JsonSchema Form. It can also reference the <code>application.schema.json</code> to customize the form&#x27;s behavior and appearance.</p><p>For example:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;ui:order&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;app&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;app&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;ui:order&quot;:[</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;spec&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;spec&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;ui:order&quot;:[</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;replicas&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;*&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="output">Output<a href="#output" class="hash-link" aria-label="Output的直接链接" title="Output的直接链接">​</a></h3><p>The <code>output</code> directory includes the following file:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">└── output</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    └── outputs.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><p><strong>outputs.yaml</strong><br>
<!-- -->It&#x27;s an optional file that allows the template author to define a set of outputs that can be queried after the template is deployed.</p><p>The following example is to output the generated domain of cluster:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">domain:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  description: the domain for the cluster</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  value: {{ .Values.horizon.cluster }}.cloudnative.com</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul><p>Overall, the Horizon template format allows developers to easily package and distribute Kubernetes-based applications using Helm Charts, while providing a user-friendly form-based input experience using React JsonSchema Form and json schema.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="gitops-repository-structure">GitOps Repository Structure<a href="#gitops-repository-structure" class="hash-link" aria-label="GitOps Repository Structure的直接链接" title="GitOps Repository Structure的直接链接">​</a></h2><p>Based on this template, users can create applications and clusters through a form on the website. We use GitOps approach to managing the resources that are deployed using the Horizon Template, the directory structure of the gitops repo is as follows:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── Chart.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── application.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── manifest.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── pipeline</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── pipeline-output.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── pipeline.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── sre</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── sre.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── env.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── horizon.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── restart.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── tags.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><p><strong>Chart.yaml</strong><br>
<!-- -->The gitops repository is also a Helm chart. It relates to the horizon template through the dependencies function in Chart.yaml.</p><p>  For example:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: v2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name: demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">version: 1.0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dependencies:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- name: deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  version: v0.0.1-ec06d596</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  repository: https://horizon-harbor-core.horizon.svc.cluster.local/chartrepo/horizon-template</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p><strong>application.yaml</strong><br>
<!-- -->A list of parameters filled in by the user through the form generated by the schema.</p><p>  For example:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">deployment:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  app:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    envs:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - name: test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      value: test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      replicas: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      resource: x-small</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p><strong>manifest.yaml</strong><br>
<!-- -->The version of the template, which is currently 0.0.2.</p><p>  For example</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">version: 0.0.2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p><strong>pipeline</strong>  </p><ul><li><p><strong>pipeline-output.yaml</strong><br>
<!-- -->The pipeline-output file contains the output of CI stage, you can control the output content by <a href="/zh/docs/tutorials/custom-ci">customizing the CI script</a>. The default CI script will output the address of the built image and git info.</p><table><thead><tr><th>Parameter</th><th>Meaning</th></tr></thead><tbody><tr><td>.Values.image</td><td>Full path of built image.</td></tr><tr><td>.Values.git.{ref}</td><td>Git ref of source code. These types of refs are currently supported: branch,tag,commit</td></tr><tr><td>.Values.git.commitID</td><td>Commit id of source code</td></tr><tr><td>.Values.git.url</td><td>URL of source code</td></tr></tbody></table><p>For example:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">deployment:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  image: library/demo:v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  git:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    branch: master</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    commitID: 28992d8f35a6ef38d59181080b3728df9540d8d6</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    url: https://github.com/horizoncd/springboot-source-demo.git</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p><strong>pipeline.yaml</strong><br>
<!-- -->The pipeline.yaml file contains configuration for CI stage, the administrator can <a href="/zh/docs/tutorials/custom-ci">customize the json schema of CI stage</a> to extend more build types.</p><table><thead><tr><th>Parameter</th><th>Meaning</th></tr></thead><tbody><tr><td>.Values.buildType</td><td>Build type of this cluster.  &quot;dockerfile&quot; is supported by default.</td></tr><tr><td>.Values.dockerfile.path</td><td>Path of dockerfile.</td></tr><tr><td>.Values.dockerfile.content</td><td>Content of dockefile</td></tr></tbody></table><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pipeline:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  buildType: dockerfile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  dockerfile:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    path: ./Dockerfile</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul></li><li><p><strong>sre</strong>  </p><ul><li><p><strong>sre.yaml</strong><br>
<!-- -->In some special situations, SRE can override any parameters in the horizon template&#x27;s <code>values.yaml</code> through <code>sre.yaml</code>.
For example, if we want to schedule an application to nodes with a specific label, we can modify <code>sre.yaml</code> as follows:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">deployment: </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  affinity:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    nodeAffinity:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      requiredDuringSchedulingIgnoredDuringExecution:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        nodeSelectorTerms:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        - matchExpressions:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          - key: cloudnative/demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            operator: In</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            values:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - &quot;true&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>sre.yaml is generally used to deal with special requirements, while json schema is used to support general requirements.</p></li></ul></li><li><p><strong>system</strong>  </p><p>There are some files in the system directory, which contain some parameters that you can refer to in the template.</p><ul><li><p><strong>env.yaml</strong>  </p><table><thead><tr><th>Parameter</th><th>Meaning</th></tr></thead><tbody><tr><td>.Values.env.environment</td><td>Environment name</td></tr><tr><td>.Values.env.region</td><td>Kubernetes name</td></tr><tr><td>.Values.env.namespace</td><td>Namespace name</td></tr><tr><td>.Values.env.baseRegistry</td><td>Address of image registry</td></tr><tr><td>.Values.env.ingressDomain</td><td>Domain of ingress</td></tr></tbody></table><p>For example:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">deployment:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  env:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    environment: local</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    region: local</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    namespace: local-1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    baseRegistry: horizon-harbor-core.horizon.svc.cluster.local</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ingressDomain: cloudnative.com</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p><strong>horizon.yaml</strong> </p><table><thead><tr><th>Parameter</th><th>Meaning</th></tr></thead><tbody><tr><td>.Values.horizon.application</td><td>Application name</td></tr><tr><td>.Values.horizon.clusterID</td><td>Cluster id</td></tr><tr><td>.Values.horizon.cluster</td><td>Cluster name</td></tr><tr><td>.Values.horizon.template.name</td><td>Template name</td></tr><tr><td>.Values.horizon.template.release</td><td>Domain of ingress</td></tr><tr><td>.Values.horizon.priority</td><td>Priority of this cluster. you can use it for oversale or preemption.</td></tr></tbody></table><p>For example:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">deployment:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  horizon:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    application: demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    clusterID: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cluster: demo-1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    template:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      name: deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      release: v0.0.1-ec06d596</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    priority: P0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p><strong>restart.yaml</strong></p><table><thead><tr><th>Parameter</th><th>Meaning</th></tr></thead><tbody><tr><td>.Values.restartTime</td><td>Restart time of cluster.You can use it in the resource annotations for rolling update.</td></tr></tbody></table><p>For example:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">deployment:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  restartTime: &quot;2023-01-06 18:28:49&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-add-a-new-template-in-horizon">How to Add a New Template in Horizon<a href="#how-to-add-a-new-template-in-horizon" class="hash-link" aria-label="How to Add a New Template in Horizon的直接链接" title="How to Add a New Template in Horizon的直接链接">​</a></h2><p>You can create a new template repository on Github and submit the files according to the above requirements. Then, follow the <a href="/zh/docs/user-guide/common-user/template">Template Management Guide</a> to add the new template.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/horizoncd/horizoncd.github.io/blob/master/docs/docs/reference/template/specification.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">最后<!-- -->由 <b>Kiloson</b> <!-- -->于 <b><time datetime="2023-06-16T09:35:32.000Z">2023年6月16日</time></b> <!-- -->更新</span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文档分页导航"><a class="pagination-nav__link pagination-nav__link--prev" href="/zh/docs/reference/api/apis"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">apis</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#what-is-horizon-template" class="table-of-contents__link toc-highlight">What is Horizon Template</a></li><li><a href="#prepare" class="table-of-contents__link toc-highlight">Prepare</a><ul><li><a href="#why-do-we-choose-react-jsonschema-form" class="table-of-contents__link toc-highlight">Why do we choose React JsonSchema Form</a></li></ul></li><li><a href="#template-structure" class="table-of-contents__link toc-highlight">Template Structure</a><ul><li><a href="#helm-chart" class="table-of-contents__link toc-highlight">Helm Chart</a></li><li><a href="#json-schema" class="table-of-contents__link toc-highlight">Json Schema</a></li><li><a href="#output" class="table-of-contents__link toc-highlight">Output</a></li></ul></li><li><a href="#gitops-repository-structure" class="table-of-contents__link toc-highlight">GitOps Repository Structure</a></li><li><a href="#how-to-add-a-new-template-in-horizon" class="table-of-contents__link toc-highlight">How to Add a New Template in Horizon</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Horizon, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/zh/assets/js/runtime~main.053f97fd.js"></script>
<script src="/zh/assets/js/main.d3eccb78.js"></script>
</body>
</html>